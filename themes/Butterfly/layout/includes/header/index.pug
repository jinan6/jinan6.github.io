if page.top_img !== false
  if is_post()
    - var top_img = page.top_img || page.cover || page.randomcover || theme.default_top_img
  else if is_page()
    - var top_img = page.top_img || theme.default_top_img
  else if is_tag()
    - var top_img = theme.tag_per_img && theme.tag_per_img[page.tag] 
    - top_img = top_img ? top_img : (theme.tag_img !== false ? theme.tag_img || theme.default_top_img : false)
  else if is_category()
    - var top_img = theme.category_per_img && theme.category_per_img[page.category]
    - top_img = top_img ? top_img : (theme.category_img !== false ? theme.category_img || theme.default_top_img : false)
  else if is_home()
    - var top_img = theme.index_img !== false ? theme.index_img || theme.default_top_img : false
  else if is_archive()
    - var top_img = theme.archive_img !== false ? theme.archive_img || theme.default_top_img : false
  else
    - var top_img = page.top_img || theme.default_top_img

  if theme.douban
    - var doubanExist = false
    if is_current('/movies/', [strict])
      - var top_img = theme.douban.movies_img !== false ? theme.douban.movies_img || theme.default_top_img : false
      - doubanExist = true
    else if is_current('/books/', [strict])
      - var top_img = theme.douban.books_img !== false ? theme.douban.books_img || theme.default_top_img : false
      - doubanExist = true
    else if is_current('/games/', [strict])
      - var top_img = theme.douban.games_img !== false ? theme.douban.games_img || theme.default_top_img : false
      - doubanExist = true

  if top_img !== false
    - var imgSource = top_img && top_img.indexOf('/') !== -1 ? `background-image: url(${url_for(top_img)})` : `background: ${top_img}`
    - var bg_img = top_img ? imgSource : ''
    - var site_title = is_archive() ? _p('page.archives') : page.title || page.tag || page.category || config.title
    - var isHomeClass = is_home() ? 'full_page' : 'not-index-bg'
    - is_post() ? isHomeClass = 'post-bg' : isHomeClass
  else
    - var isHomeClass = 'no-top-img'
else
  - var top_img = false
  - var isHomeClass = 'no-top-img'

//- header#page-header(class=isHomeClass style=bg_img)
//-   !=partial('includes/header/nav', {}, {cache:theme.fragment_cache})
//-   if top_img !== false
//-     if is_post()
//-       include ./post-info.pug
//-     else if is_home() 
//-       #site-info
//-         h1#site-title=site_title
//-         #site-subtitle
//-           span#subtitle
//-         if(theme.social)
//-           #site_social_icons
//-             !=fragment_cache('social', function(){return partial('includes/header/social')})
//-       #scroll-down
//-         i.fas.fa-angle-down.scroll-down-effects
//-     else
//-       #page-site-info
//-         h1#site-title=site_title


header#page-header(class=isHomeClass style=bg_img)
  !=partial('includes/header/nav', {}, {cache:theme.fragment_cache})
  if top_img !== false
    if is_post()
      include ./post-info.pug
    else if is_home() 
      #site-info
        h1#site-title=site_title
        #site-subtitle
          span#subtitle
        #full.cover-wrapper.featured(style='')
          .cover-backstretch
          .cover-body
            .bottom
              .menu.navigation
                .list-h
                  a#home.active(href='/', data-pjax-state='')
                    img.lazyload.placeholder.loaded(src='https://cdn.jsdelivr.net/gh/jinan6/PicGo-img/img/20200923110533.png', srcset='https://cdn.jsdelivr.net/gh/jinan6/PicGo-img/img/20200923110533.png', data-ll-status='loaded')
                    p 主页
                  a#archives(href='/archives/', data-pjax-state='load')
                    img.lazyload.placeholder.loaded(src='https://cdn.jsdelivr.net/gh/jinan6/PicGo-img/img/20200923110830.svg', srcset='https://cdn.jsdelivr.net/gh/jinan6/PicGo-img/img/20200923110830.svg', data-ll-status='loaded')
                    p 归档
                  a#links(href='/tags/', data-pjax-state='load')
                    img.lazyload.placeholder.loaded(src='https://cdn.jsdelivr.net/gh/jinan6/PicGo-img/img/20200923111232.svg', srcset='https://cdn.jsdelivr.net/gh/jinan6/PicGo-img/img/20200923111232.svg', data-ll-status='loaded')
                    p 标签
                  a#comments(href='/categories/', data-pjax-state='')
                    img.lazyload.placeholder.loaded(src='https://cdn.jsdelivr.net/gh/jinan6/PicGo-img/img/20200923111427.svg', srcset='https://cdn.jsdelivr.net/gh/jinan6/PicGo-img/img/20200923111427.svg', data-ll-status='loaded')
                    p 分类
                  a#about(href='/link/', data-pjax-state='load')
                    img.lazyload.placeholder.loaded(src='https://cdn.jsdelivr.net/gh/jinan6/PicGo-img/img/20200923111759.svg', srcset='https://cdn.jsdelivr.net/gh/jinan6/PicGo-img/img/20200923111759.svg', data-ll-status='loaded')
                    p 友链

        if(theme.social)
          #site_social_icons
            !=fragment_cache('social', function(){return partial('includes/header/social')})
      #scroll-down
        i.fas.fa-angle-down.scroll-down-effects
    else
      #page-site-info
        h1#site-title=site_title
