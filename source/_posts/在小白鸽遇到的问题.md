---
title: åœ¨å°ç™½é¸½é‡åˆ°çš„é—®é¢˜
tags:
  - Mybatis
  - è®°å½•
categories:
  - Mybatis
  - è®°å½•
abbrlink: 704219325
date: 2020-08-24 19:42:11
cover: https://cdn.jsdelivr.net/gh/jinan6/PicGo-img/img/20200824200516.png
sticky:
top_img:
---

<div class="snote bug"><p>è¿‘æœŸç¢°åˆ°å¹¶ä¸”å·²è§£å†³çš„é—®é¢˜</p></div>

### ä¸€ä¸ªè¾“å…¥æ¡†éœ€è¦ä¼ å¤šä¸ªå­—æ®µçš„æƒ…å†µ

![](https://cdn.jsdelivr.net/gh/jinan6/PicGo-img/img/20200824194406.png)

è§£å†³ï¼š

1. åœ¨å®ä½“ç±»æ–°åŠ ä¸€ä¸ªå­—æ®µ

   ```java
   /**ç”¨æ¥æŸ¥è¯¢å¤šä¸ªå€¼å¾—æ¡ä»¶*/
   @Excel(name = "ç”¨æ¥æŸ¥è¯¢å¤šä¸ªå€¼å¾—æ¡ä»¶")
   private String Bastard;
   ```

   ç”Ÿæˆå¯¹åº”çš„	get  å’Œ set  ï¼Œè¿˜æœ‰	toString

2. ç„¶ååœ¨ç›¸åº”çš„`xml`é‡Œï¼ŒåŠ å…¥ä»¥ä¸‹é…ç½®

   ```xml
   <if test="Bastard != null  and Bastard != ''">
       and (stu.`user_name` like concat('%',#{Bastard},'%')
       or stu.`student_num` = #{Bastard}
       or stu.`phone` = #{Bastard})
   </if>
   ```

3. ç„¶ååœ¨å¯¹åº”çš„`html`é‡Œå†™å…¥å¯¹åº”çš„`name`å³å¯

   ```html
   <li>
    <input style="border:none; border-bottom:2px solid #eee;outline:none" type="text" name="Bastard" placeholder="å­¦å‘˜å§“ååŠé¦–å­—æ¯/å­¦å·/ç”µè¯"  />
   </li>
   ```

### Mybatisé‡Œé¢çš„foreachç”¨æ³•

```xml
<if test="className != null  and className != ''">
    and cla.`class_name` in
    <foreach item="item" index="index" collection="className.split(',')"  open="(" separator="," close=")">
        #{item}
    </foreach>
</if>
```

foreachå…ƒç´ çš„å±æ€§ä¸»è¦æœ‰ itemï¼Œindexï¼Œcollectionï¼Œopenï¼Œseparatorï¼Œcloseã€‚

itemè¡¨ç¤ºé›†åˆä¸­æ¯ä¸€ä¸ªå…ƒç´ è¿›è¡Œè¿­ä»£æ—¶çš„åˆ«å.

indexæŒ‡ å®šä¸€ä¸ªåå­—ï¼Œç”¨äºè¡¨ç¤ºåœ¨è¿­ä»£è¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡è¿­ä»£åˆ°çš„ä½ç½®.

openè¡¨ç¤ºè¯¥è¯­å¥ä»¥ä»€ä¹ˆå¼€å§‹ï¼Œseparatorè¡¨ç¤ºåœ¨æ¯æ¬¡è¿›è¡Œè¿­ä»£ä¹‹é—´ä»¥ä»€ä¹ˆç¬¦å·ä½œä¸ºåˆ†éš” ç¬¦.

closeè¡¨ç¤ºä»¥ä»€ä¹ˆç»“æŸ.

```code
# itemè¡¨ç¤ºé›†åˆä¸­æ¯ä¸€ä¸ªå…ƒç´ è¿›è¡Œè¿­ä»£æ—¶çš„åˆ«å.
# indexæŒ‡ å®šä¸€ä¸ªåå­—ï¼Œç”¨äºè¡¨ç¤ºåœ¨è¿­ä»£è¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡è¿­ä»£åˆ°çš„ä½ç½®.
# collection ä¸ºä¼ è¿›æ¥çš„collectionå‚æ•°çš„ *ç±»å‹*
# openè¡¨ç¤ºè¯¥è¯­å¥ä»¥ä»€ä¹ˆå¼€å§‹
# separatorè¡¨ç¤ºåœ¨æ¯æ¬¡è¿›è¡Œè¿­ä»£ä¹‹é—´ä»¥ä»€ä¹ˆç¬¦å·ä½œä¸ºåˆ†éš”ç¬¦
# closeè¡¨ç¤ºä»¥ä»€ä¹ˆç»“æŸ
```

### SQLè¯­å¥å‡æ³•è¿ç®—

```sql
ç›´æ¥é€šè¿‡â€œbai+â€ã€â€œ-â€ç¬¦å·è¿ç®—å³å¯;
		//ç¬¬ä¸€ä¸ªå­—æ®µ				å‡	ç¬¬äºŒä¸ªå­—æ®µ			åˆ«å
SELECT (sub.`purchase_quantity` - sub.`remaining_courses`) a FROM dove_student_subgect sub  
```

### jQueryæ—¶é—´èŒƒå›´

è¿‘æœŸé‡åˆ°äº†ä¸€ä¸ªé€‰æ‹©æ—¶é—´èŒƒå›´çš„ä¸œè¥¿ï¼Œç›´æ¥Copyäº†åˆ«äººçš„ä»£ç ï¼Œè¿›è¡Œè®°å½•

```html
                        <li>
                            <div class="form-group">
                                <label class="font-noraml">æ—¶é—´èŒƒå›´ï¼š</label>
                                <select style="border:none; border-bottom:2px solid #eee;outline:none;width: 100px;"
                                        id="shijianfanwei">
                                    <option value="0">ä¸é™</option>
                                    <option value="1">ä»Šå¤©</option>
                                    <option value="2">æ˜¨å¤©</option>
                                    <option value="3">æœ¬å‘¨</option>
                                    <option value="4">æœ€è¿‘7å¤©</option>
                                    <option value="5">æœ€è¿‘30å¤©</option>
                                    <option value="6">æœ¬æœˆ</option>
                                    <option value="7">ä¸Šæœˆ</option>
                                </select>
                            </div>
                        </li>
                        <li class="select-time">
                            <input style="border:none; border-bottom:2px solid #eee;outline:none" type="text"
                                   class="time-input" id="startTime" placeholder="å¼€å§‹æ—¶é—´" name="params[beginPayTime]"/>
                            <span> åˆ° </span>
                            <input style="border:none; border-bottom:2px solid #eee;outline:none" type="text"
                                   class="time-input" id="endTime" placeholder="ç»“æŸæ—¶é—´" name="params[endPayTime]"/>
                        </li>
```

```javascript
        $("#shijianfanwei").change(function (data) {
        var dangqianshijian = shijiangeshizhuanhua(new Date());//å½“å‰æ—¶é—´
        if ($(this).val() == 0) {//ä¸é™
            $("#startTime").val("1970-01-01")
            $("#endTime").val(dangqianshijian)
        }
        if ($(this).val() == 1) {//ä»Šå¤©
            $("#startTime").val(dangqianshijian)
            $("#endTime").val(dangqianshijian)
        }
        if ($(this).val() == 2) {//æ˜¨å¤©
            $("#startTime").val(shijiangeshizhuanhua(new Date(new Date().getTime() - 24 * 60 * 60 * 1000)))
            $("#endTime").val($("#startTime").val())
        }
        if ($(this).val() == 3) {//æœ¬å‘¨
            var Nowdate = new Date();
            var WeekFirstDay = new Date(Nowdate - (Nowdate.getDay() - 1) * 86400000);
            M = Number(WeekFirstDay.getMonth()) + 1
            $("#startTime").val(WeekFirstDay.getFullYear() + "-" + M + "-" + WeekFirstDay.getDate())
            var Nowdate = new Date();
            var WeekFirstDay = new Date(Nowdate - (Nowdate.getDay() - 1) * 86400000);
            var WeekLastDay = new Date((WeekFirstDay / 1000 + 6 * 86400) * 1000);
            N = Number(WeekLastDay.getMonth()) + 1
            $("#endTime").val(WeekLastDay.getFullYear() + "-" + N + "-" + WeekLastDay.getDate())
        }
        if ($(this).val() == 4) {//æœ€è¿‘ä¸ƒå¤©
            $("#startTime").val(shijiangeshizhuanhua(new Date(new Date().getTime() - 7 * 24 * 60 * 60 * 1000)))
            $("#endTime").val(dangqianshijian)
        }
        if ($(this).val() == 5) {//æœ€è¿‘30å¤©
            $("#startTime").val(shijiangeshizhuanhua(new Date(new Date().getTime() - 30 * 24 * 60 * 60 * 1000)))
            $("#endTime").val(dangqianshijian)
        }
        if ($(this).val() == 6) {//æœ¬æœˆ
            $("#startTime").val(dangqianshijian.slice(0, dangqianshijian.length - 2) + "01")
            $("#endTime").val(dangqianshijian)
        }
        if ($(this).val() == 7) {//æœ¬æœˆ
            //è·å–å½“å‰æ—¶é—´
            var currentDate = new Date();
            var month = currentDate.getMonth() + (-1);
            if (month < 0) {
                var n = parseInt((-month) / 12);
                month += n * 12;
                currentDate.setFullYear(currentDate.getFullYear() - n);
            }
            currentDate = new Date(currentDate.setMonth(month));
            //è·å¾—å½“å‰æœˆä»½0-11
            var currentMonth = currentDate.getMonth();
            //è·å¾—å½“å‰å¹´ä»½4ä½å¹´
            var currentYear = currentDate.getFullYear();
            //è·å¾—ä¸Šä¸€ä¸ªæœˆçš„ç¬¬ä¸€å¤©
            var currentMonthFirstDay = new Date(currentYear, currentMonth, 1);
            //è·å¾—ä¸Šä¸€æœˆçš„æœ€åä¸€å¤©
            var currentMonthLastDay = new Date(currentYear, currentMonth + 1, 0);
            $("#startTime").val(shijiangeshizhuanhua(currentMonthFirstDay))
            $("#endTime").val(shijiangeshizhuanhua(currentMonthLastDay))
        }
    }
```

### è‹¥ä¾è‡ªå¸¦çš„ä¸‹æ‹‰æ¡†å¤šé€‰ä½¿ç”¨

é¦–å…ˆå¼•å…¥ç›¸åº”çš„`css`å’Œ`js`

```html
//css
    <th:block th:include="include :: select2-css" />
    <th:block th:include="include :: bootstrap-select-css" />
    
//js
    <th:block th:include="include :: select2-js" />
    <th:block th:include="include :: bootstrap-select-js" />
```



å¯¹åº”çš„HTMLä»£ç 

```html
                        <li>
                            <label>æ ¡åŒºï¼š</label>
                            <select class="noselect2 selectpicker" name="deptName" data-none-selected-text="é€‰æ‹©æ ¡åŒº" multiple>
                                <option v-for="(bm,i) in xiaoqvlist" :value="bm.deptName">{{bm.deptName}}</option>
                            </select>
                        </li>
```

åŠ å…¥`multiple`ä¸ºå¤šé€‰ï¼Œä¸åŠ ä¸ºå•é€‰

### å°†doubleå‹è½¬åŒ–ä¸ºstringå‹

ç®€å•è®°å½•ä»£ç ï¼Œæ–¹ä¾¿ä»¥åæŸ¥çœ‹

```java
            //ä½¿æŠ˜æ‰£é‡‘é¢ä¿ç•™ä¸¤ä½å°æ•°
            String num2 = subgects.get(i).getDiscountamount();
            Double b1 = Double.parseDouble(num2);
            DecimalFormat format = new DecimalFormat("0.00");
            String str= format.format(b1);
            subgects.get(i).setDiscountamount(str);
```

### é‡ç½®ä¸‹æ‹‰æ¡†æ“ä½œ

ç‚¹å‡»é‡ç½®æŒ‰é’®æŸäº›ä¸‹æ‹‰æ¡†ä¸ä¼šè¿›è¡Œé‡ç½®

js æ–¹æ³• ä¸€ä¸ªç®€å•çš„ä¾‹å­

```javascript
    //é‡ç½®æ–¹æ³•
    function reset1() {
        //é‡ç½®æ ¡åŒºä¸‹æ‹‰æ¡†
        $("select[name='deptName']").selectpicker('val', ['noneSelectedText'])//å›åˆ°åˆå§‹çŠ¶æ€
        $("select[name='deptName']").selectpicker('refresh');//åˆ·æ–°
    }
```

html

```html
onclick="$.form.reset(),reset1()"
```

### å…³äºç”¨Stringç±»å‹å­˜å‚¨æ•°å­—

ä½¿ç”¨Stringç±»å‹å­˜å‚¨æ•°å­—ï¼Œå¥½åƒé»˜è®¤ä¼šæœ‰ä¸‰ä½å°æ•°ç‚¹ï¼Œå³ 1.000.ç±»ä¼¼è¿™ç§

ä¿ç•™ä¸¤ä½å°æ•°

```java
//ä»£ç ç¤ºä¾‹       
for (int i = 0; i < stusummarize.size(); i++) {
            String nums = stusummarize.get(i).getDiscountamount();
            Double b = Double.parseDouble(nums);
            DecimalFormat df = new DecimalFormat("0.00");
            String shi = df.format(b);
            stusummarize.get(i).setDiscountamount(shi);
        }
```

### è‹¥ä¾å¯¼å‡ºè¡¨çš„ä½¿ç”¨

ğŸ‘‰ğŸ‘‰ğŸ‘‰ [å®˜æ–¹æ–‡æ¡£](http://doc.ruoyi.vip/ruoyi/document/htsc.html#%E5%AF%BC%E5%87%BA%E5%AE%9E%E7%8E%B0%E6%B5%81%E7%A8%8B)

1. åœ¨å®ä½“ç±»çš„å˜é‡ä¸ŠåŠ å…¥æ³¨è§£

   ```java
   @Excel(name = "ç”¨æˆ·åºå·", prompt = "ç”¨æˆ·ç¼–å·")
   private Long userId;
   
   @Excel(name = "ç”¨æˆ·åç§°")
   private String userName;
   	
   @Excel(name = "ç”¨æˆ·æ€§åˆ«", readConverterExp = "0=ç”·,1=å¥³,2=æœªçŸ¥")
   private String sex;
   
   @Excel(name = "æœ€åç™»é™†æ—¶é—´", width = 30, dateFormat = "yyyy-MM-dd HH:mm:ss")
   private Date loginDate;
   ```

   

2. æ·»åŠ å¯¼å‡ºæŒ‰é’®äº‹ä»¶

   ```html
   <a class="btn btn-warning" onclick="$.table.exportExcel()">
   	<i class="fa fa-download"></i> å¯¼å‡º
   </a>
   ```

   

3. æ§åˆ¶å™¨æ–¹æ³•

   ```java
   @PostMapping("/export")
   @ResponseBody
   public AjaxResult export(User user)
   {
   	List<User> list = userService.selectUserList(user);
   	ExcelUtil<User> util = new ExcelUtil<User>(User.class);
   	return util.exportExcel(list, "ç”¨æˆ·æ•°æ®");
   }
   ```

   

4. å‰ç«¯è°ƒç”¨å°è£…å¥½çš„æ–¹æ³•$.table.initï¼Œä¼ å…¥åå°`exportUrl`

   ```javas
   var options = {
   	exportUrl: prefix + "/export",	//åœ°å€
   	columns: [{
   		field: 'id',
   		title: 'ä¸»é”®'
   	},
   	{
   		field: 'name',
   		title: 'åç§°'
   	}]
   };
   $.table.init(options);
   ```

   

5. åŠ å…¥å¯¼å‡ºçš„æ—¶å€™æ˜¾ç¤ºçš„åç§°

   ```java
   //åŠ åœ¨ var options = { çš„ä¸‹é¢ ï¼Œ columns: [{  çš„ä¸Šé¢å³å¯
   modalName: "è¯¾æ¶ˆæ±‡æ€»è¡¨",		//åå­—æ ¹æ®å®é™…éœ€è¦ä¿®æ”¹å³å¯
   ```

   

**ä¸å®šæ—¶æ›´æ–°è¡¥å……-----**

